(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9065:function(e,t,s){Promise.resolve().then(s.bind(s,6947))},6947:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Home}});var a=s(7437),n=s(2265),r=s(4660),l=s(4829);let o=l.Z.create({baseURL:"http://localhost:8001",headers:{"Content-Type":"application/json"}}),i={async sendMessage(e,t){let s=await o.post("/api/query",{prompt:e,conversation_id:t,user_id:"default-user"});return s.data},async getConversations(){let e=await o.get("/api/conversations");return e.data},async deleteConversation(e){await o.delete("/api/conversations/".concat(e))},async getTreeData(e){let t=await o.get("/api/tree/".concat(e));return t.data},async getFollowUpSuggestions(e){let t=await o.get("/api/suggestions",{params:{conversation_id:e}});return t.data}},c=(0,r.Ue)((e,t)=>({messages:{},conversations:{},isProcessing:!1,currentTreeData:null,sendMessage:async(t,s)=>{let a=s||"conv-".concat(Date.now());e({isProcessing:!0});try{let s=await i.sendMessage(t,a);e(e=>({messages:{...e.messages,[a]:[...e.messages[a]||[],{id:"msg-".concat(Date.now()),type:"user",content:t,timestamp:new Date},{id:s.id,type:"albert",content:s.content,timestamp:new Date,metadata:s.metadata}]}}))}catch(e){console.error("Albert Error:",e)}finally{e({isProcessing:!1})}},loadConversations:async()=>{try{let t=await i.getConversations();e({conversations:t})}catch(e){console.error("Failed to load conversations:",e)}},deleteConversation:async t=>{try{await i.deleteConversation(t),e(e=>{let{[t]:s,...a}=e.conversations;return{conversations:a}})}catch(e){console.error("Failed to delete conversation:",e)}},setProcessing:t=>e({isProcessing:t})}));var components_MessageList=e=>{let{messages:t}=e;return(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-3xl px-4 py-3 rounded-lg ".concat("user"===e.type?"bg-blue-600 text-white":"error"===e.type?"bg-red-100 text-red-900":"bg-gray-100 text-gray-900"),children:["user"!==e.type&&(0,a.jsx)("div",{className:"text-xs font-semibold mb-1 opacity-75",children:"albert"===e.type?"Albert":e.type}),(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:e.content}),e.metadata&&(0,a.jsx)("div",{className:"mt-2 text-xs opacity-75",children:(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{className:"cursor-pointer",children:"View metadata"}),(0,a.jsx)("pre",{className:"mt-1 text-xs overflow-auto",children:JSON.stringify(e.metadata,null,2)})]})})]})},e.id))})},components_InputBar=e=>{let{value:t,onChange:s,onSend:n,disabled:r=!1,placeholder:l="Type your message..."}=e;return(0,a.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,a.jsx)("textarea",{value:t,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n())},disabled:r,placeholder:l,className:"flex-1 albert-input resize-none max-h-32",rows:1,style:{minHeight:"2.5rem",height:"auto"}}),(0,a.jsx)("button",{onClick:n,disabled:r||!t.trim(),className:"albert-button disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]})};let d=["What can you help me with?","Explain your capabilities","Search for recent documents","Show me the knowledge tree"];var components_FollowUpSuggestions=e=>{let{onSelect:t}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-w-2xl mx-auto",children:d.map((e,s)=>(0,a.jsx)("button",{onClick:()=>t(e),className:"p-4 text-left border border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:(0,a.jsx)("span",{className:"text-gray-700",children:e})},s))})},components_ConversationPanel=e=>{let{conversationId:t}=e,{messages:s,sendMessage:r,isProcessing:l}=c(),[o,i]=(0,n.useState)(""),handleSend=async()=>{o.trim()&&!l&&(await r(o,t||void 0),i(""))};return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:t?(0,a.jsx)(components_MessageList,{messages:s[t]||[]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Welcome to ActAlbert"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"Start a conversation to explore your data with our agentic RAG service"}),(0,a.jsx)(components_FollowUpSuggestions,{onSelect:i})]})})}),(0,a.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,a.jsx)(components_InputBar,{value:o,onChange:i,onSend:handleSend,disabled:l,placeholder:l?"Albert is processing your request...":"Ask Albert anything..."})})]})};function TreeVisualization(e){let{conversationId:t}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center h-full bg-white",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Tree Visualization"}),(0,a.jsx)("p",{className:"text-gray-500",children:t?"Tree visualization for conversation: ".concat(t):"Select a conversation to view its tree structure"})]})})}var components_Header=e=>{let{brandName:t,showTreeToggle:s,onTreeToggle:n}=e;return(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-blue-600",children:["Act",t]}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Agentic RAG Service"})]}),s&&(0,a.jsx)("button",{onClick:n,className:"albert-button",children:"Toggle Tree View"})]})})},components_Sidebar=e=>{let{onConversationSelect:t,activeConversation:s}=e,{conversations:r,loadConversations:l,deleteConversation:o}=c();return(0,n.useEffect)(()=>{l()},[l]),(0,a.jsxs)("div",{className:"w-64 bg-gray-900 text-white flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,a.jsx)("button",{className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"New Conversation"})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Recent Conversations"}),Object.entries(r).map(e=>{let[n,r]=e;return(0,a.jsx)("div",{className:"p-3 rounded-lg cursor-pointer mb-2 transition-colors ".concat(s===n?"bg-gray-700":"hover:bg-gray-800"),onClick:()=>t(n),children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium truncate",children:r.title}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:r.last_update_time})]}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),o(n)},className:"text-gray-400 hover:text-red-400",children:"\xd7"})]})},n)})]})})]})};function Home(){let[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(components_Sidebar,{onConversationSelect:t,activeConversation:e}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)(components_Header,{brandName:"Albert",showTreeToggle:!0,onTreeToggle:()=>r(!s)}),(0,a.jsx)("main",{className:"flex-1 overflow-hidden",children:s?(0,a.jsx)(TreeVisualization,{conversationId:e}):(0,a.jsx)(components_ConversationPanel,{conversationId:e})})]})]})}}},function(e){e.O(0,[57,971,472,744],function(){return e(e.s=9065)}),_N_E=e.O()}]);