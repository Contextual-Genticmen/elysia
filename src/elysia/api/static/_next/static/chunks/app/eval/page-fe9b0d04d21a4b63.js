(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5011],{66221:function(e,t,r){Promise.resolve().then(r.bind(r,1851))},56654:function(e,t,r){"use strict";r.d(t,{B:function(){return c},SessionProvider:function(){return d}});var s=r(57437),a=r(2265),l=r(4497);let n="f1b38080-213a-4307-bbb3-580e7f66f794",i="device_identifier",o=async()=>{let e=localStorage.getItem(i);if(e&&e.length>0)return e;try{let e=await fetch("https://api64.ipify.org?format=json"),t=(await e.json()).ip,r=(0,l.ZP)(t,n);return localStorage.setItem(i,r),r}catch(t){console.error("Error fetching IP address:",t);let e=(0,l.ZP)("".concat(Date.now(),"-fallback"),n);return localStorage.setItem(i,e),e}},c=(0,a.createContext)({mode:"home",handleModeChange:()=>{},id:"",userLimit:null,getUserLimit:()=>{},showRateLimitDialog:!1,enableRateLimitDialog:()=>{}}),d=e=>{let{children:t}=e,[r,l]=(0,a.useState)("home"),[n,i]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[f,x]=(0,a.useState)(),m=(0,a.useRef)(!1),p=async()=>{if(!f)return;let e=await fetch("/api/get_user_limit",{method:"POST",body:JSON.stringify({user_id:f})});i(await e.json())};(0,a.useEffect)(()=>{m.current||(m.current=!0,h())},[]);let h=async()=>{x(await o())};return(0,s.jsx)(c.Provider,{value:{mode:r,handleModeChange:e=>{l(e)},getUserLimit:p,userLimit:n,id:f,showRateLimitDialog:d,enableRateLimitDialog:()=>{u(!0)}},children:t})}},1851:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var s=r(57437),a=r(2265),l=r(62869),n=r(87704),i=r(56940),o=r(97059),c=r(69349),d=r(47625),u=r(8147),f=r(22190),x=r(94508);let m={light:"",dark:".dark"},p=a.createContext(null);function h(){let e=a.useContext(p);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let g=a.forwardRef((e,t)=>{let{id:r,className:l,children:n,config:i,...o}=e,c=a.useId(),u="chart-".concat(r||c.replace(/:/g,""));return(0,s.jsx)(p.Provider,{value:{config:i},children:(0,s.jsxs)("div",{"data-chart":u,ref:t,className:(0,x.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-primary [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-background_alt [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-foreground [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",l),...o,children:[(0,s.jsx)(v,{id:u,config:i}),(0,s.jsx)(d.h,{children:n})]})})});g.displayName="Chart";let v=e=>{let{id:t,config:r}=e,a=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return a.length?(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(m).map(e=>{let[r,s]=e;return"\n".concat(s," [data-chart=").concat(t,"] {\n").concat(a.map(e=>{var t;let[s,a]=e,l=(null===(t=a.theme)||void 0===t?void 0:t[r])||a.color;return l?"  --color-".concat(s,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},y=u.u,b=a.forwardRef((e,t)=>{let{active:r,payload:l,className:n,indicator:i="dot",hideLabel:o=!1,hideIndicator:c=!1,label:d,labelFormatter:u,labelClassName:f,formatter:m,color:p,nameKey:g,labelKey:v}=e,{config:y}=h(),b=a.useMemo(()=>{var e;if(o||!(null==l?void 0:l.length))return null;let[t]=l,r="".concat(v||t.dataKey||t.name||"value"),a=j(y,t,r),n=v||"string"!=typeof d?null==a?void 0:a.label:(null===(e=y[d])||void 0===e?void 0:e.label)||d;return u?(0,s.jsx)("div",{className:(0,x.cn)("font-medium",f),children:u(n,l)}):n?(0,s.jsx)("div",{className:(0,x.cn)("font-medium",f),children:n}):null},[d,u,l,o,f,y,v]);if(!r||!(null==l?void 0:l.length))return null;let N=1===l.length&&"dot"!==i;return(0,s.jsxs)("div",{ref:t,className:(0,x.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-secondary bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[N?null:b,(0,s.jsx)("div",{className:"grid gap-1.5",children:l.map((e,t)=>{let r="".concat(g||e.name||e.dataKey||"value"),a=j(y,e,r),l=p||e.payload.fill||e.color;return(0,s.jsx)("div",{className:(0,x.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-secondary","dot"===i&&"items-center"),children:m&&(null==e?void 0:e.value)!==void 0&&e.name?m(e.value,e.name,e,t,e.payload):(0,s.jsxs)(s.Fragment,{children:[(null==a?void 0:a.icon)?(0,s.jsx)(a.icon,{}):!c&&(0,s.jsx)("div",{className:(0,x.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":N&&"dashed"===i}),style:{"--color-bg":l,"--color-border":l}}),(0,s.jsxs)("div",{className:(0,x.cn)("flex flex-1 justify-between leading-none",N?"items-end":"items-center"),children:[(0,s.jsxs)("div",{className:"grid gap-1.5",children:[N?b:null,(0,s.jsx)("span",{className:"text-secondary",children:(null==a?void 0:a.label)||e.name})]}),e.value&&(0,s.jsx)("span",{className:"font-mono font-medium tabular-nums text-primary",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function j(e,t,r){if("object"!=typeof t||null===t)return;let s="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,a=r;return r in t&&"string"==typeof t[r]?a=t[r]:s&&r in s&&"string"==typeof s[r]&&(a=s[r]),a in e?e[a]:e[r]}b.displayName="ChartTooltip",f.D,a.forwardRef((e,t)=>{let{className:r,hideIcon:a=!1,payload:l,verticalAlign:n="bottom",nameKey:i}=e,{config:o}=h();return(null==l?void 0:l.length)?(0,s.jsx)("div",{ref:t,className:(0,x.cn)("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",r),children:l.map(e=>{let t="".concat(i||e.dataKey||"value"),r=j(o,e,t);return(0,s.jsxs)("div",{className:(0,x.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-secondary"),children:[(null==r?void 0:r.icon)&&!a?(0,s.jsx)(r.icon,{}):(0,s.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null}).displayName="ChartLegend";var N=r(35974),_=r(22744),w=r(99376),k=r(56654),C=r(66070),S=r(93022);let F={count:{label:"Count",color:"#ffffff"}};function O(){let{id:e}=(0,a.useContext)(k.B),t=(0,a.useRef)(!1),[r,d]=(0,a.useState)(null),u=(0,w.useRouter)(),[f,x]=(0,a.useState)([]),m=e=>{if(!e)return;let t=new Map;for(let r in e.feedback_by_date){let s=new Date(r),a=s.toLocaleDateString(),l=s.toISOString().split("T")[0];t.has(l)||t.set(l,{day:a,count:0,positive:0,negative:0,very_positive:0});let n=t.get(l),i=e.feedback_by_date[r];t.set(l,{...n,count:n.count+i.count,positive:n.positive+i.positive,negative:n.negative+i.negative,very_positive:n.very_positive+i.superpositive})}x(Array.from(t.values()).sort((t,r)=>{let s=new Date(Object.keys(e.feedback_by_date).find(e=>new Date(e).toLocaleDateString()===t.day)||""),a=new Date(Object.keys(e.feedback_by_date).find(e=>new Date(e).toLocaleDateString()===r.day)||"");return s.getTime()-a.getTime()}))},p=async()=>{if(!e||t.current)return;t.current=!0;let r=await fetch("/api/get_feedback_metadata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e})}),s=await r.json();d(s),m(s),t.current=!1};return(0,a.useEffect)(()=>{p()},[e]),(0,s.jsx)("div",{className:"flex flex-col w-full gap-2 items-start justify-start",tabIndex:0,children:(0,s.jsxs)("div",{className:"flex flex-col gap-8 items-start justify-start w-full",children:[(0,s.jsx)("div",{className:"flex items-center justify-start gap-2",children:(0,s.jsx)("p",{className:"text-primary text-xl font-heading font-bold",children:"Evaluation Dashboard"})}),t.current&&(0,s.jsx)("div",{className:"w-full flex flex-col items-start justify-start gap-2 fade-in",children:(0,s.jsx)(S.O,{className:"w-full h-[25vh]"})}),!t.current&&r&&(0,s.jsxs)("div",{className:"w-full flex flex-col items-start justify-start gap-2 fade-in",children:[(0,s.jsxs)(C.Zb,{className:"w-full",children:[(0,s.jsxs)(C.Ol,{children:[(0,s.jsx)(C.ll,{children:(0,s.jsxs)("div",{className:"w-full flex items-start justify-between",children:[(0,s.jsx)("p",{children:"Feedback Evaluation"}),(0,s.jsxs)(l.z,{onClick:()=>{u.push("/eval/feedback")},className:"text-primary",children:[(0,s.jsx)(_.j86,{}),"Browse Feedback"]})]})}),(0,s.jsx)(C.SZ,{children:"Feedback received over the last 30 days"})]}),(0,s.jsxs)(C.aY,{className:"flex lg:flex-row flex-col gap-2",children:[(0,s.jsx)(g,{config:F,className:"max-h-[25vh] lg:w-2/3 w-full",children:(0,s.jsxs)(n.v,{accessibilityLayer:!0,data:f,children:[(0,s.jsx)(i.q,{vertical:!1}),(0,s.jsx)(o.K,{dataKey:"day",tickLine:!1,tickMargin:10,axisLine:!1,tickFormatter:e=>e}),(0,s.jsx)(y,{content:(0,s.jsx)(b,{})}),(0,s.jsx)(c.$,{dataKey:"positive",fill:"#A5FF90",radius:3}),(0,s.jsx)(c.$,{dataKey:"negative",fill:"#BA2B2B",radius:3}),(0,s.jsx)(c.$,{dataKey:"very_positive",fill:"#ABCDFF",radius:3})]})}),(0,s.jsxs)("div",{className:"w-full lg:w-1/3 flex flex-col border border-secondary rounded-md h-full",children:[(0,s.jsxs)("div",{className:"flex flex-col flex-1 items-start justify-start gap-2 p-4 w-full border-b border-secondary",children:[(0,s.jsx)("p",{className:"text-secondary text-sm",children:"Total Feedback"}),(0,s.jsx)("p",{className:"text-primary text-3xl font-bold",children:r.total_feedback})]}),(0,s.jsxs)("div",{className:"flex items-start justify-start w-full flex-1",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start border-r border-secondary gap-2 w-1/3 p-2",children:[(0,s.jsx)("p",{className:"text-secondary text-sm",children:"Very Positive"}),(0,s.jsx)("p",{className:"text-highlight text-3xl font-bold",children:r.feedback_by_value.superpositive})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start border-r border-secondary gap-2 w-1/3 p-2",children:[(0,s.jsx)("p",{className:"text-secondary text-sm",children:"Positive"}),(0,s.jsx)("p",{className:"text-accent text-3xl font-bold",children:r.feedback_by_value.positive})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 w-1/3 p-2",children:[(0,s.jsx)("p",{className:"text-secondary text-sm",children:"Negative"}),(0,s.jsx)("p",{className:"text-error text-3xl font-bold",children:r.feedback_by_value.negative})]})]})]})]})]}),(0,s.jsxs)(C.Zb,{className:"w-full",children:[(0,s.jsxs)(C.Ol,{children:[(0,s.jsx)(C.ll,{children:"Query Time Analysis"}),(0,s.jsx)(C.SZ,{children:"Query time per model for the last 30 days"})]}),(0,s.jsxs)(C.aY,{className:"flex lg:flex-row flex-col gap-2",children:[(0,s.jsxs)("div",{className:"lg:w-2/3 w-full flex flex-col",children:[Object.keys(r.call_speed_by_base_model).map(e=>(0,s.jsxs)("div",{className:"flex flex-col p-2 gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"text-primary text-lg w-[300px] lg:w-full truncate",children:e}),(0,s.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-start",children:[(0,s.jsx)(N.C,{children:"Base Model"}),(0,s.jsxs)(N.C,{children:["Avg."," ",Number(r.call_speed_by_base_model[e].mean).toFixed(2),"s"]}),(0,s.jsxs)(N.C,{className:"bg-accent-foreground text-primary",children:["Min."," ",Number(r.call_speed_by_base_model[e].minimum).toFixed(2),"s"]}),(0,s.jsxs)(N.C,{className:"bg-warning text-primary",children:["Max."," ",Number(r.call_speed_by_base_model[e].maximum).toFixed(2),"s"]})]})]},e)),Object.keys(r.call_speed_by_complex_model).map(e=>(0,s.jsxs)("div",{className:"flex flex-col p-2 gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"text-primary text-lg w-[300px] lg:w-full truncate",children:e}),(0,s.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-start",children:[(0,s.jsx)(N.C,{children:"Complex Model"}),(0,s.jsxs)(N.C,{children:["Avg."," ",Number(r.call_speed_by_complex_model[e].mean).toFixed(2),"s"]}),(0,s.jsxs)(N.C,{className:"bg-accent-foreground text-primary",children:["Min."," ",Number(r.call_speed_by_complex_model[e].minimum).toFixed(2),"s"]}),(0,s.jsxs)(N.C,{className:"bg-warning text-primary",children:["Max."," ",Number(r.call_speed_by_complex_model[e].maximum).toFixed(2),"s"]})]})]},e))]}),(0,s.jsxs)("div",{className:"lg:w-1/3 w-full flex flex-col border border-secondary rounded-md h-full",children:[(0,s.jsxs)("div",{className:"flex flex-col flex-1 items-start justify-start gap-2 p-4 w-full border-b border-secondary",children:[(0,s.jsx)("p",{className:"text-secondary text-sm",children:"Avg. Query Time"}),(0,s.jsxs)("p",{className:"text-primary text-3xl font-bold",children:[Number(r.full_query_time.mean).toFixed(2),"s"]})]}),(0,s.jsxs)("div",{className:"flex items-start justify-start w-full flex-1",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start border-r border-secondary gap-2 w-1/2 p-4",children:[(0,s.jsx)("p",{className:"text-secondary text-sm",children:"Longest"}),(0,s.jsxs)("p",{className:"text-warning text-3xl font-bold",children:[Number(r.full_query_time.maximum).toFixed(2),"s"]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 w-1/2 p-4",children:[(0,s.jsx)("p",{className:"text-secondary text-sm",children:"Shortest"}),(0,s.jsxs)("p",{className:"text-accent text-3xl font-bold",children:[Number(r.full_query_time.minimum).toFixed(2),"s"]})]})]})]})]})]})]})]})})}},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var s=r(57437);r(2265);var a=r(90535),l=r(94508);let n=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-background shadow hover:bg-primary/80",secondary:"border-transparent bg-foreground text-secondary",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-primary border-secondary"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)(n({variant:r}),t),...a})}},62869:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var s=r(57437),a=r(2265),l=r(37053),n=r(90535),i=r(94508);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-colors disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-background_alt text-secondary hover:bg-foreground hover:text-primary",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-foreground_alt hover:text-primary",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-foreground_alt hover:text-primary",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:c=!1,...d}=e,u=c?l.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(o({variant:a,size:n,className:r})),ref:t,...d})});c.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},ll:function(){return o}});var s=r(57437),a=r(2265),l=r(94508);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border border-secondary bg-background_alt text-primary shadow",r),...a})});n.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},93022:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});var s=r(57437),a=r(94508);function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",t),...r})}},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return l}});var s=r(61994),a=r(53335);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}}},function(e){e.O(0,[6051,6957,4650,5221,2971,2117,1744],function(){return e(e.s=66221)}),_N_E=e.O()}]);